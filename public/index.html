<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Wanga Music Studio</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-[#0A0A3E] text-white min-h-screen flex flex-col items-center p-4">
  <h1 class="text-4xl font-extrabold text-transparent bg-clip-text bg-gradient-to-r from-purple-400 via-indigo-400 to-cyan-400 mb-6">
    WANGA MUSIC STUDIO
  </h1>

  <input type="text" id="youtubeUrl" placeholder="Paste YouTube link" class="w-full max-w-lg px-4 py-2 rounded bg-gray-800 text-white focus:outline-none" />
  <button onclick="getInfo()" class="mt-4 px-6 py-2 bg-purple-600 hover:bg-purple-700 rounded text-white">
    Get Music Info
  </button>

  <div id="result" class="mt-8 text-center hidden">
    <img id="thumbnail" class="mx-auto rounded mb-4" />
    <h2 id="title" class="text-xl font-bold mb-2"></h2>
    <div class="flex justify-center gap-4">
      <a id="mp3Link" class="px-4 py-2 bg-green-600 hover:bg-green-700 rounded text-white" target="_blank">Download MP3</a>
      <a id="mp4Link" class="px-4 py-2 bg-blue-600 hover:bg-blue-700 rounded text-white" target="_blank">Download MP4</a>
    </div>
  </div>

  <script>
    async function getInfo() {
      const url = document.getElementById("youtubeUrl").value.trim();
      if (!url) return alert("Please paste a valid YouTube link");

      const res = await fetch(`/api/info?url=${encodeURIComponent(url)}`);
      if (!res.ok) return alert("Failed to fetch info");

      const data = await res.json();
      document.getElementById("title").textContent = data.title;
      document.getElementById("thumbnail").src = data.thumbnail;
      document.getElementById("mp3Link").href = data.formats.mp3;
      document.getElementById("mp4Link").href = data.formats.mp4;
      document.getElementById("result").classList.remove("hidden");
    }
  </script>
</body>
</html>
